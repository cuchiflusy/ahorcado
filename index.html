<!DOCTYPE html>
<html>
<head>
  <title>Juego del Ahorcado</title>
  <style>
    /* Estilos para el contenedor del juego */
    #ahorcado {
      text-align: center;
      margin-top: 20px;
      font-family: Arial, sans-serif;
    }

    /* Estilos para el tablero, letras, botones, etc. */
    #tablero {
      margin-bottom: 20px;
    }

    .palabra {
      font-size: 24px;
      margin-bottom: 10px;
    }

    #muñeco {
      font-size: 20px;
      margin-bottom: 20px;
      white-space: pre;
    }

    table {
      margin: 0 auto;
      border-collapse: collapse;
    }

    th, td {
      padding: 8px;
      border: 1px solid black;
    }

    #mensaje {
      font-weight: bold;
      margin-top: 10px;
    }

    #passwordContainer {
      display: none;
    }
  </style>
</head>
<body>

<div id="ahorcado">
  <div id="tablero">
    <div class="palabra" id="palabra"></div>
    <div id="muñeco"></div>
    <div id="mensaje"></div>
  </div>
  <div id="passwordContainer">
    <input type="password" id="password" placeholder="Contraseña para reiniciar">
  </div>
  <input type="text" id="respuesta" maxlength="2" placeholder="Ingresa una letra y un número (e.g. a3)">
  <button onclick="jugar()">Probar respuesta</button>
  <button onclick="reiniciar()">Reiniciar</button>
  <table>
    <tr>
      <th>Aciertos</th>
      <th>Fallos</th>
    </tr>
    <tr>
      <td id="aciertos"></td>
      <td id="fallos"></td>
    </tr>
  </table>
</div>

<script>
let respuestasCorrectas = ["a3", "b4", "b5", "c1", "c3", "c3", "e4", "g4"];
let aciertos = [];
let fallos = [];
let intentos = 0;
const passwordCorrecta = "inutil";

function mostrarMuñeco(intentos) {
  let dibujo = [
    " -------",
    " |     |",
    " |     " + (intentos > 0 ? "O" : ""),
    " |    " + (intentos > 1 ? "/" : " ") + (intentos > 2 ? "|" : "") + (intentos > 3 ? "\\" : ""),
    " |    " + (intentos > 4 ? "/ " : " ") + (intentos > 5 ? "\\" : ""),
    "-+-"
  ];

  if (intentos >= 7) {
    dibujo[2] = " |     X";
  }

  let dibujoFinal = dibujo.join("<br>");
  document.getElementById("muñeco").innerHTML = dibujoFinal;
}

function mostrarTablero() {
  mostrarMuñeco(intentos);

  let palabraMostrada = "";
  for (let respuesta of respuestasCorrectas) {
    if (aciertos.includes(respuesta)) {
      palabraMostrada += respuesta + " ";
    } else {
      palabraMostrada += "_ ";
    }
  }
  document.getElementById("palabra").innerText = palabraMostrada;

  document.getElementById("aciertos").innerText = aciertos.join(", ");
  document.getElementById("fallos").innerText = fallos.join(", ");
}

function respuestaCorrecta(respuesta) {
  return respuestasCorrectas.includes(respuesta);
}

function actualizarRespuestas(respuesta) {
  if (respuestaCorrecta(respuesta)) {
    if (!aciertos.includes(respuesta)) {
      aciertos.push(respuesta);
    }
  } else {
    if (!fallos.includes(respuesta)) {
      fallos.push(respuesta);
    }
    intentos++;
  }
}

function juegoTerminado() {
  return aciertos.length >= 8 || intentos >= 7;
}

function mostrarMensaje(mensaje) {
  document.getElementById("mensaje").innerText = mensaje;
}

function reiniciar() {
  const passwordIngresada = document.getElementById("password").value;
  if (passwordIngresada.toLowerCase() !== passwordCorrecta) {
    mostrarMensaje("Contraseña incorrecta");
    return;
  }

  aciertos = [];
  fallos = [];
  intentos = 0;
  mostrarTablero();
  mostrarMensaje("");
}

function jugar() {
  let respuestaUsuario = document.getElementById("respuesta").value.toLowerCase();

  if (respuestaUsuario.length !== 2 || !/^[a-g][1-5]$/.test(respuestaUsuario)) {
    mostrarMensaje("Entrada inválida. Ingresa una letra (a-g) y un número (1-5).");
    return;
  }

  if (aciertos.includes(respuestaUsuario)) {
    mostrarMensaje("¡Ya has intentado con esa respuesta! Prueba otra.");
    return;
  }

  actualizarRespuestas(respuestaUsuario);
  mostrarTablero();

  if (juegoTerminado()) {
    let mensaje = aciertos.length >= 8 ? "¡Oleee, pues a por el gatito!" : "¡Oh no! ¡Has perdido!";
    mostrarMensaje(mensaje);

    if (intentos >= 7) {
      document.getElementById("passwordContainer").style.display = "block";
    } else {
      document.getElementById("passwordContainer").style.display = "none";
    }
  }
}

mostrarTablero();
</script>

</body>
</html>
